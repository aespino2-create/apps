<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Galería de Fotografías — Visualización</title>
  <style>
    body{font-family:Inter,system-ui,Arial;margin:0;background:#f4f6fb;color:#111;display:flex;flex-direction:column;min-height:100vh}
    header{background:#1f6feb;color:#fff;padding:16px;text-align:center}
    main{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}
    .menu{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;width:100%;max-width:800px;margin-top:20px}
    .menu button{background:#fff;border:none;border-radius:12px;padding:20px;box-shadow:0 4px 8px rgba(0,0,0,.1);cursor:pointer;font-size:1rem;transition:.2s}
    .menu button:hover{background:#1f6feb;color:#fff;transform:scale(1.05)}
    .viewer{display:none;flex-direction:column;align-items:center;gap:16px;max-width:800px;width:100%}
    .viewer img{max-width:100%;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.2)}
    .descripcion{background:#fff;border-radius:12px;padding:12px;box-shadow:0 4px 8px rgba(0,0,0,.1)}
    .back-btn{align-self:flex-start;background:#1f6feb;color:#fff;border:none;border-radius:8px;padding:8px 12px;cursor:pointer}
    .puntuacion{font-size:1.2rem;color:#1f6feb}
  </style>
</head>
<body>
  <header>
    <h1>Galería de Fotografías</h1>
    <p>Haz clic en una imagen para verla con su explicación y puntuación</p>
  </header>

  <main>
    <div id="menu" class="menu"></div>

    <div id="viewer" class="viewer">
      <button class="back-btn" onclick="mostrarMenu()">← Volver al menú</button>
      <h2 id="nombreFoto"></h2>
      <img id="imagenFoto" alt="Foto" />
      <div id="descripcionFoto" class="descripcion"></div>
      <div id="puntuacionFoto" class="puntuacion"></div>
    </div>
  </main>

  <script>
  let datos = [];

  async function cargarDatos(){
    try{
      const resp = await fetch('data.json');
      datos = await resp.json();
      crearMenu();
    }catch(err){
      document.getElementById('menu').innerHTML = '<p>Error al cargar data.json</p>';
      console.error(err);
    }
  }

  function crearMenu(){
    const menu = document.getElementById('menu');
    menu.innerHTML = '';
    datos.forEach((item,i)=>{
      const btn = document.createElement('button');
      btn.textContent = item.nombre;
      btn.onclick = ()=> mostrarFoto(i);
      menu.appendChild(btn);
    });
  }

  function mostrarFoto(i){
    const item = datos[i];
    document.getElementById('menu').style.display='none';
    const viewer = document.getElementById('viewer');
    viewer.style.display='flex';
    document.getElementById('nombreFoto').textContent = item.nombre;
    document.getElementById('imagenFoto').src = item.imagen;
    document.getElementById('descripcionFoto').textContent = item.descripcion;
    document.getElementById('puntuacionFoto').innerHTML = 'Puntuación: ' + renderEstrellas(item.puntuacion) + ` (${item.puntuacion})`;
  }

  function mostrarMenu(){
    document.getElementById('viewer').style.display='none';
    document.getElementById('menu').style.display='grid';
  }

  function renderEstrellas(score){
    const filled = Math.round(score);
    return '★'.repeat(filled) + '☆'.repeat(10-filled);
  }

  cargarDatos();
  </script>
</body>
</html>
